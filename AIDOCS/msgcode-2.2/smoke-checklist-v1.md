# Smoke Checklist v1 - 实战验收脚本

> 目标：10 轮真实会话冒烟测试，覆盖关键功能并留档
>
> 使用方法：
> 1. 准备 MLX 环境（启动 mlx_lm.server）
> 2. 在 iMessage 群组中逐轮执行输入
> 3. 记录实际行为和结果
> 4. 填写 actual、pass、logRef 字段
> 5. 失败轮附"最小复现步骤"

---

## Round 1: 基础对话

| 字段 | 内容 |
|------|------|
| **round** | 1 |
| **input** | `hello` |
| **expected** | 返回问候语，模型正常响应 |
| **actual** | （待填写） |
| **pass** | （待填写） |
| **logRef** | （待填写 - 关键日志片段） |

---

## Round 2: 工具调用

| 字段 | 内容 |
|------|------|
| **round** | 2 |
| **input** | `列出当前目录的文件` |
| **expected** | 调用 shell 工具执行 `ls` 命令，返回文件列表 |
| **actual** | （待填写） |
| **pass** | （待填写） |
| **logRef** | （待填写 - 工具调用证据） |

---

## Round 3: /clear 清理会话

| 字段 | 内容 |
|------|------|
| **round** | 3 |
| **input** | `/clear` |
| **expected** | 返回"已清理 session + summary" |
| **actual** | （待填写） |
| **pass** | （待填写） |
| **logRef** | （待填写 - 清理日志证据） |

---

## Round 4: 404 降级重试

| 字段 | 内容 |
|------|------|
| **round** | 4 |
| **input** | `告诉我当前的日期和时间` |
| **expected** | 正常响应（可能触发 404 fallback 重试，用户无感知） |
| **actual** | （待填写） |
| **pass** | （待填写） |
| **logRef** | （待填写 - fallback 日志证据） |

---

## Round 5: /steer 紧急转向

| 字段 | 内容 |
|------|------|
| **round** | 5 |
| **input** | `开始一个复杂任务...` (半途) -> `/steer 停止当前任务` |
| **expected** | 收到 steer 消息后立即停止，跳过剩余工具 |
| **actual** | （待填写） |
| **pass** | （待填写） |
| **logRef** | （待填写 - steer 消息证据） |

---

## Round 6: /next 轮后消息

| 字段 | 内容 |
|------|------|
| **round** | 6 |
| **input** | `/next 第一条消息` -> `/next 第二条消息` -> `/next 第三条消息` |
| **expected** | 每轮结束后依次消费一条消息，不会丢失 |
| **actual** | （待填写） |
| **pass** | （待填写） |
| **logRef** | （待填写 - followUp 队列证据） |

---

## Round 7: MLX 服务不可达

| 字段 | 内容 |
|------|------|
| **round** | 7 |
| **input** | 先停止 MLX server -> 发送消息 -> 重启 MLX server |
| **expected** | 返回统一错误："MLX 服务不可达：请先启动 mlx_lm.server 并检查 mlx.baseUrl" |
| **actual** | （待填写） |
| **pass** | （待填写） |
| **logRef** | （待填写 - 错误日志证据） |

---

## Round 8: 多轮上下文保持

| 字段 | 内容 |
|------|------|
| **round** | 8 |
| **input** | `记住数字 42` -> `刚才是多少？` -> `再重复一遍` |
| **expected** | 三轮都能正确引用"42" |
| **actual** | （待填写） |
| **pass** | （待填写） |
| **logRef** | （待填写 - session window 证据） |

---

## Round 9: 工具链调用

| 字段 | 内容 |
|------|------|
| **round** | 9 |
| **input** | `创建一个测试文件并写入内容，然后读取验证` |
| **expected** | 连续调用 shell 工具：pwd -> cat <<EOF > file -> cat file |
| **actual** | （待填写） |
| **pass** | （待填写） |
| **logRef** | （待填写 - 多轮工具证据） |

---

## Round 10: /clear 后状态重置

| 字段 | 内容 |
|------|------|
| **round** | 10 |
| **input** | `记住重要信息：XYZ` -> `/clear` -> `刚才我让你记住什么？` |
| **expected** | /clear 后 session 和 summary 被清理，无法记住之前的内容 |
| **actual** | （待填写） |
| **pass** | （待填写） |
| **logRef** | （待填写 - 清理证据） |

---

## 统计

| 指标 | 结果 |
|------|------|
| **总轮数** | 10 |
| **通过轮数** | （待填写） |
| **失败轮数** | （待填写） |
| **通过率** | （待计算） |

---

## 失败轮详情（如有）

| Round | 失败原因 | 最小复现步骤 |
|-------|----------|--------------|
| （待填写） | （待填写） | （待填写） |

---

## 执行信息

| 字段 | 内容 |
|------|------|
| **执行日期** | （待填写） |
| **执行人** | （待填写） |
| **MLX 版本** | （待填写） |
| **模型 ID** | （待填写） |
| **备注** | （待填写） |
