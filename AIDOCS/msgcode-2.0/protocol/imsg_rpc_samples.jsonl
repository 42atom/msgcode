{"jsonrpc":"2.0","id":1,"method":"chats.list","params":{"limit":1}}
{"jsonrpc":"2.0","id":1,"result":{"chats":[{"service":"iMessage","name":"Example Chat","participants":["user@example.com","agent@example.com"],"last_message_at":"2026-01-28T00:00:00.000Z","guid":"any;+;<chat-guid>","is_group":false,"identifier":"<chat-identifier>","id":1234}]}}
{"jsonrpc":"2.0","id":2,"method":"watch.subscribe","params":{"attachments":true}}
{"jsonrpc":"2.0","result":{"subscription":1},"id":2}
{"jsonrpc":"2.0","id":3,"method":"send","params":{"chat_guid":"any;+;<chat-guid>","text":"Test from imsg RPC - msgcode 2.0 E02"}}
{"jsonrpc":"2.0","id":3,"result":{"ok":true}}
{"comment":"watch.subscribe 推送消息通知（method=message，无 id 字段，是 notification 而非 request）"}
{"jsonrpc":"2.0","method":"message","params":{"subscription":1,"message":{"id":7268,"chat_id":1234,"guid":"<message-guid>","sender":"user@example.com","is_from_me":false,"text":"Hello from imsg RPC","created_at":"2026-01-28T00:00:00.000Z","attachments":[],"reactions":[],"chat_identifier":"<chat-identifier>","chat_guid":"any;+;<chat-guid>","chat_name":"Example Chat","participants":["user@example.com","agent@example.com"],"is_group":false}}}
{"jsonrpc":"2.0","method":"message","params":{"subscription":1,"message":{"id":7269,"chat_id":1234,"guid":"<message-guid-2>","sender":"user@example.com","is_from_me":false,"text":"Check this image","created_at":"2026-01-28T00:00:10.000Z","attachments":[{"filename":"photo.jpg","mime_type":"image/jpeg","original_path":"/Users/<you>/Library/Messages/Attachments/.../photo.jpg","missing":false}],"reactions":[],"chat_identifier":"<chat-identifier>","chat_guid":"any;+;<chat-guid>","chat_name":"Example Chat","participants":["user@example.com","agent@example.com"],"is_group":false}}}
{"comment":"send 方法支持多种目标参数"}
{"jsonrpc":"2.0","id":6,"method":"send","params":{"to":"+14155551212","text":"Hello"}}
{"jsonrpc":"2.0","id":7,"method":"send","params":{"chat_id":"1234","text":"Hi"}}
{"jsonrpc":"2.0","id":8,"method":"send","params":{"chat_guid":"any;+;<chat-guid>","text":"Test"}}
{"jsonrpc":"2.0","id":9,"method":"send","params":{"chat_identifier":"iMessage;-;+14155551212","text":"Hey"}}
